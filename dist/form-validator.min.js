/*!
 * validators v0.0.1
 * (c) Andou
 * Released under the MIT License
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.FormValidator=e()}(this,function(){var p=new function(){this.extend=function(){function t(t,e){if(!r.isObject(t)||!r.isObject(e))return console.warn("合并对象数据类型是Object"),t;for(var n in e)t[n]=e[n];return t}var r=this,e=[].slice.call(arguments);if(0==e.length)return{};if(1===e.length)return e[0];for(var n=1;n<e.length;n++)t(e[0],e[n]);return e[0]},this.objectKeys=function(t){var e=[];if(!this.isObject(t))return e;if("function"==typeof Object.keys)e=Object.keys(t);else for(var n in t)e.push(n);return e},this.checkType=function(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"},this.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},n=[{name:"required",msg:"必填项",validator:function(t,e,n){return null!=t||""!==t}},{name:"tel",msg:"请输入正确的手机号",validator:function(t,e,n){return/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/.test(t)}}];function r(t){p.checkType(t,"Array")?this.rules=this.rules.concat(t):p.checkType(t,"Object")&&this.rules.push(t)}function a(t,e,n){var r=this.rules;if(0===p.objectKeys(t).length||0===p.objectKeys(e).length)return n(!0,null);var a=function(t,e){for(var n=[],r=p.objectKeys(t),a=0;a<r.length;a++){var o=r[a];null!=e[o]&&n.push(o)}return n}(t,e);if(0===a.length)return n(!0,null);var o=function(t,e,n,r){for(var a={},o=0;o<t.length;o++){for(var i=t[o],l=n[i],c=r[i],u={value:l,validator:[],asyncValidator:[]},s=0;s<c.length;s++){var f=c[s],d=!1;if(f){for(var h=0;h<e.length;h++){var v=e[h],y=!1;v&&f.name===v.name&&("function"==typeof f.validator?(d=y=!0,u.validator.push(p.extend(v,f))):"function"==typeof f.asyncValidator?(d=y=!0,u.asyncValidator.push(p.extend(v,f))):"function"==typeof v.asyncValidator?(d=y=!0,u.asyncValidator.push(p.extend(f,v))):"function"==typeof v.validator&&(d=y=!0,u.validator.push(p.extend(f,v))),!1===y&&console.warn("rule: {"+f.name+"} 缺少validator函数或asyncValidator"))}if(!1===d){y=!1;"function"==typeof f.validator?(y=!0,u.validator.push(f)):"function"==typeof f.asyncValidator&&(y=!0,u.asyncValidator.push(p.extend(f))),!1===y&&console.warn("rule: {"+f.name+"} 缺少validator函数或asyncValidator")}}else console.log("keyRules: ",c)}(0<u.validator.length||0<u.asyncValidator.length)&&(a[i]=u)}return a}(a,r,t,e);if(0===p.objectKeys(o).length)return n(!0,null);!function(e,i){var l=function(t){var e=0;if(!p.isObject(t))return e;for(var n in t){var r=t[n];r.asyncValidator&&0<r.asyncValidator.length&&(e+=r.asyncValidator.length)}return e}(e),c={};for(var t in e){for(var n=[],r=0;r<e[t].validator.length;r++){var a=e[t].validator[r],o=e[t].value,u=a.validator(o,t,a);!1===u?n.push(p.extend(a,{value:o})):u&&!1===u.valid&&n.push(p.extend(a,{value:o},u))}0<n.length&&(c[t]=n)}if(0===l)return i(c);for(var t in e)for(r=0;r<e[t].asyncValidator.length;r++)!function(t,r){var a=e[r].asyncValidator[t],o=e[r].value;a.asyncValidator(o,r,a,function(t){var e,n=!1;!1===t?(e=p.extend(a,{value:o}),n=!0):t&&!1===t.valid&&(e=p.extend(a,{value:o},t),n=!0),n&&(p.checkType(c[r],"Array")?c[r].push(e):c[r]=[e]),--l<=0&&i(c)})}(r,t)}(o,function(t){n(0===p.objectKeys(t).length,t)})}return function(t){var e=n;p.checkType(t,"Array")?e=e.concat(t):p.checkType(t,"Object")&&e.push(t),this.rules=e,this.validator=a,this.extend=r}});