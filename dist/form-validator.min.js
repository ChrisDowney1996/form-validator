/*!
 * @as80393313/form-validator v0.0.1
 * (c) Andou
 * Released under the MIT License
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.FormValidator=n()}(this,function(){var p=new function(){this.extend=function(){function t(t,n){if(!r.isObject(t)||!r.isObject(n))return console.warn("合并对象数据类型是Object"),t;for(var e in n)t[e]=n[e];return t}var r=this,n=[].slice.call(arguments);if(0==n.length)return{};if(1===n.length)return n[0];for(var e=1;e<n.length;e++)t(n[0],n[e]);return n[0]},this.objectKeys=function(t){var n=[];if(!this.isObject(t))return n;if("function"==typeof Object.keys)n=Object.keys(t);else for(var e in t)n.push(e);return n},this.checkType=function(t,n){return Object.prototype.toString.call(t)==="[object "+n+"]"},this.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},n=[{name:"required",msg:"必填项",validator:function(t,n,e){return null!=t&&""!==t}},{name:"tel",msg:"请输入正确的手机号",validator:function(t,n,e){return/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/.test(t)}}];function e(r,t){function n(t){var n=!1;if(p.isObject(t)){for(var e=0;e<r.length;e++)r[e].name===t.name&&(n=!0,r[e]=p.extend(r[e],t));!1===n&&r.push(t)}}if(p.checkType(t,"Array"))for(var e=0;e<t.length;e++)n(t[e]);else p.checkType(t,"Object")&&n(t);return r}function r(t,n,e,r){var a=this.rules;if(0===p.objectKeys(t).length||0===p.objectKeys(n).length)return e(!0,null);var i=function(t,n){for(var e=[],r=p.objectKeys(t),a=0;a<r.length;a++){var i=r[a];null!=n[i]&&e.push(i)}return e}(t,n);if(0===i.length)return e(!0,null);var o=function(t,n,e,r){for(var a={},i=0;i<t.length;i++){for(var o=t[i],l=e[o],u=r[o],c={value:l,validator:[],asyncValidator:[]},f=0;f<u.length;f++){var s=u[f],d=!1;if(s){for(var v=0;v<n.length;v++){var h=n[v],y=!1;h&&s.name===h.name&&("function"==typeof s.validator?(d=y=!0,c.validator.push(p.extend(h,s))):"function"==typeof s.asyncValidator?(d=y=!0,c.asyncValidator.push(p.extend(h,s))):"function"==typeof h.asyncValidator?(d=y=!0,c.asyncValidator.push(p.extend(s,h))):"function"==typeof h.validator&&(d=y=!0,c.validator.push(p.extend(s,h))),!1===y&&console.warn("rule: {"+s.name+"} 缺少validator函数或asyncValidator"))}if(!1===d){y=!1;"function"==typeof s.validator?(y=!0,c.validator.push(s)):"function"==typeof s.asyncValidator&&(y=!0,c.asyncValidator.push(p.extend(s))),!1===y&&console.warn("rule: {"+s.name+"} 缺少validator函数或asyncValidator")}}}(0<c.validator.length||0<c.asyncValidator.length)&&(a[o]=c)}return a}(i,a,t,n);if(0===p.objectKeys(o).length)return e(!0,null);!function(t,o,e){var l=function(t){var n=0;if(!p.isObject(t))return n;for(var e in t){var r=t[e];r.asyncValidator&&0<r.asyncValidator.length&&(n+=r.asyncValidator.length)}return n}(t),u={},c=!1;for(var n in t){for(var r=[],a=0;a<t[n].validator.length;a++){var i=t[n].validator[a],f=t[n].value,s=i.validator(f,n,i);!1===s?r.push(p.extend(i,{value:f})):s&&!1===s.valid&&r.push(p.extend(i,{value:f},s))}0<r.length&&(u[n]=r)}if(0===l)return o(u);for(var n in t)for(a=0;a<t[n].asyncValidator.length;a++)!function(n,r){var a=t[r].asyncValidator[n],i=t[r].value;a.asyncValidator(i,r,a,function(t){if(!1===c){var n,e=!1;!1===t?(n=p.extend(a,{value:i}),e=!0):t&&!1===t.valid&&(n=p.extend(a,{value:i},t),e=!0),e&&(p.checkType(u[r],"Array")?u[r].push(n):u[r]=[n]),--l<=0&&o(u)}},function(t){c=!0,u=r=n=null,e(new Error(t))})}(a,n)}(o,function(t){e(0===p.objectKeys(t).length,t)},function(){r.apply(this,arguments)})}return function(t){this.rules=e(n,t),this.validator=r,this.extend=function(t){this.rules=e.apply(this,this.rules,t)}}});